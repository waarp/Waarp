

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Type de Task &mdash; Documentation Waarp R66 3.6.0-1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Recherche" href="../search.html"/>
    <link rel="top" title="Documentation Waarp R66 3.6.0-1" href="../index.html"/>
        <link rel="up" title="Référence des fichiers de configuration" href="index.html"/>
        <link rel="next" title="authent.xml" href="authent.html"/>
        <link rel="prev" title="rule.xml" href="rule.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Waarp R66
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Démarage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/installation.html#pre-requis">Pré-requis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/installation.html#linux">Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/installation.html#avec-les-packages-systemes">Avec les packages systèmes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/installation.html#avec-les-depots-waarp">Avec les dépôts Waarp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/installation.html#avec-les-archives-autonomes">Avec les archives autonomes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../installation/installation.html#windows">Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/installation.html#id1">Avec les archives autonomes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/instance-creation.html">Creation d’instance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/instance-creation.html#principe-generaux">Principe généraux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/instance-creation.html#creation-d-une-instance-linux">Création d’une instance Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#creation-de-la-configuration">Création de la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#configuration-de-la-base-de-donnees">Configuration de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#initialisation-de-la-base-de-donnees">Initialisation de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#demarrage-du-serveur">Démarrage du serveur</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../installation/instance-creation.html#creation-d-une-instance-windows">Création d’une instance Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#id2">Création de la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#id3">Configuration de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#id4">Initialisation de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/instance-creation.html#id5">Démarrage du serveur</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/miseajour.html">Mise à jour</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/miseajour.html#pre-requis">Pré-requis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/miseajour.html#avec-les-packages">Avec les packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/miseajour.html#avec-les-archives-autonomes">Avec les archives autonomes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/miseajour.html#avec-les-jars">Avec les jars</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/configuration.html">Configuration Simple</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#principes-generaux">Principes Généraux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#client-xml">client.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#server-xml">server.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#details">Détails</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#identity">Identity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#server">Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#network">Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#ssl">SSL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#directory">Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#db">DB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#extendtaskfactory">ExtendTaskFactory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#pushmonitor">PushMonitor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#logback-client-server-xml">logback-{client,server}.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#authent-xml">authent.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#rules-xml">rules.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration.html#cryptographie">Cryptographie</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#cryptokey">cryptokey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#keystore">keystore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#truststore">truststore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#adminstore">adminstore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installation/configuration.html#restsignkey">restsignkey</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/configuration-sample.html">Exemple de Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-sample.html#client-xml">client.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-sample.html#server-xml">server.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-sample.html#authent-xml">authent.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-sample.html#rule-xml">rule.xml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/initialisation.html">Initialisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/initialisation.html#initialiser-l-instance">Initialiser l’instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/initialisation.html#lancer-l-instance-serveur">Lancer l’instance serveur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/configuration-full.html">Configuration Avancée</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-full.html#client-xml">client.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-full.html#server-xml">server.xml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/configuration-full.html#optimisation">Optimisation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/upgrade.html">Mise à jour</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/upgrade.html#avec-les-packages">Avec les packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/upgrade.html#avec-les-archives-autonomes">Avec les archives autonomes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/log.html">Gestion des logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/purge.html">Purge de l’historique des transferts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/purge.html#en-ligne-de-commande">En ligne de commande</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/purge.html#avec-l-api-rest">Avec l’API REST</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Utilisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/filewatcher.html">Waarp R66 FileWatcher</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/filewatcher.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/filewatcher.html#parametrage">Paramétrage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#principe">Principe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#configuration-minimale">Configuration minimale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#configuration-avancee">Configuration avancée</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#exemple-complet">Exemple complet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../usage/filewatcher.html#lancement">Lancement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/filewatcher.html#windows">Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/icap-configuration.html">Configuration de la tâche ICAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/icap-configuration.html#mode-operatoire-preconise-pour-l-installation-et-la-configuration">Mode opératoire préconisé pour l’installation et la configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../usage/icap-configuration.html#prerequis">Prérequis :</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/icap-configuration.html#etape-1-permettre-la-connexion-et-l-envoi-d-un-fichier-sain-nomme-fichier">Etape 1 : Permettre la connexion et l’envoi d’un fichier sain (nommé fichier)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/icap-configuration.html#etape-2-permettre-la-connexion-et-l-envoi-d-un-fichier-malsain-de-test">Etape 2 : Permettre la connexion et l’envoi d’un fichier malsain de test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/icap-configuration.html#etape-3-configurer-une-regle-pour-utiliser-ces-parametres">Etape 3 : Configurer une règle pour utiliser ces paramètres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/icap-configuration.html#options-specifiques">Options spécifiques</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/monitor-exporter.html">Configuration du Monitoring en mode PUSH HTTP(S) REST ou vers un service Elasticsearch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/monitor-exporter.html#description-generale">Description générale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/monitor-exporter.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../usage/monitor-exporter.html#derniere-date-de-verification">Dernière date de vérification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/monitor-exporter.html#cas-particulier-des-clusters">Cas particulier des clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/monitor-exporter.html#pour-elasticsearch">Pour Elasticsearch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usage/monitor-exporter.html#exemple-de-configuration-d-un-logstash">Exemple de configuration d’un Logstash</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../interface/index.html">Interface Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interface/monitoring.html">Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interface/monitoring.html#accueil">Accueil</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interface/monitoring.html#transferts-passes">Transferts passés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interface/monitoring.html#statut-serveur">Statut serveur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interface/admin/index.html">Administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interface/admin/transfert.html">Transfert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/transfert.html#lister-les-transferts">Lister les transferts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/transfert.html#controller-les-transferts">Controller les transferts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/admin/host.html">Moniteur</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/host.html#lister-les-hotes">Lister les hôtes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/host.html#creation-d-un-hote">Création d’un hôte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/host.html#mis-a-jour-d-un-hote">Mis à jour d’un hôte</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/admin/rule.html">Règle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/rule.html#listing-des-regles">Listing des règles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/rule.html#creation-de-regle">Création de règle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/admin/rule.html#mis-a-jour-de-regle">Mis à jour de règle</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/admin/task-list.html">Type de tâche</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interface/admin/system.html">Système</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interface/rest/index.html">REST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/general.html">Généralités</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/general.html#authentification-des-requetes">Authentification des requêtes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/general.html#signature-des-requetes">Signature des requêtes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/general.html#horodatage-des-requetes">Horodatage des requêtes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/log.html">Gestion de l’historique</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/log.html#export-et-purge-de-l-historique">Export et purge de l’historique</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/transfers.html">/transfers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/transfers.html#get-transfers">GET /transfers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/transfers.html#get-transfers-id">GET /transfers/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/transfers.html#post-transfers">POST /transfers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/transfers.html#put-transfers-id">PUT /transfers/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/transfers.html#delete-transfers-id">DELETE /transfers/:id</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/hosts.html">/hosts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hosts.html#get-hosts">GET /hosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hosts.html#get-hosts-id">GET /hosts/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hosts.html#post-hosts">POST /hosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hosts.html#put-hosts-id">PUT /hosts/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hosts.html#delete-hosts-id">DELETE /hosts/:id</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/hostconfigs.html">/hostconfigs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hostconfigs.html#get-hostconfigs">GET /hostconfigs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hostconfigs.html#get-hostconfigs-id">GET /hostconfigs/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hostconfigs.html#put-hostconfigs-id">PUT /hostconfigs/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hostconfigs.html#post-hostconfigs">POST /hostconfigs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/hostconfigs.html#delete-hostconfigs-id">DELETE /hostconfigs/:id</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/configurations.html">/configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/configurations.html#get-configurations">GET /configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/configurations.html#get-configurations-id">GET /configurations/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/configurations.html#post-configurations">POST /configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/configurations.html#put-configurations-id">PUT /configurations/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/configurations.html#delete-configurations-id">DELETE /configurations/:id</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/rules.html">/rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/rules.html#get-rules">GET /rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/rules.html#get-rules-id">GET /rules/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/rules.html#post-rules">POST /rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/rules.html#put-rules-id">PUT /rules/:id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/rules.html#delete-rules-id">DELETE /rules/:id</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/info.html">/info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/info.html#get-info">GET /info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/info.html#id1">GET /info</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/bandwidth.html">/bandwidth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/bandwidth.html#get-bandwidth">GET /bandwidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/bandwidth.html#put-bandwidth">PUT /bandwidth</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/control.html">/control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/control.html#get-control">GET /control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/control.html#put-control">PUT /control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/control.html#post-control">POST /control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/server.html">/server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/server.html#get-server">GET /server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/server.html#put-server">PUT /server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/rest/business.html">/business</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/rest/business.html#get-business">GET /business</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interface/restv2/index.html">REST v2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/authentication.html">Authentification des requêtes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/authentication.html#authentification-basique">Authentification Basique</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/authentication.html#authentification-hmac">Authentification HMAC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/signature.html">Signature des requêtes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/transfers/index.html">Gestion des transferts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/list.html">Lister les transferts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/create.html">Ajouter un transfert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/consult.html">Consulter un transfert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/stop.html">Arrêter un transfert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/restart.html">Redémarrer un transfert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/transfers/cancel.html">Annuler un transfert</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/hosts/index.html">Gestion des hôtes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/hosts/list.html">Lister les hôtes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/hosts/create.html">Ajouter un hôte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/hosts/consult.html">Consulter un hôte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/hosts/modify.html">Modifier un hôte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/hosts/delete.html">Supprimer un hôte</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/rules/index.html">Gestion des règles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/rules/list.html">Lister les règles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/rules/create.html">Ajouter une règle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/rules/consult.html">Consulter une règle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/rules/modify.html">Modifier une règle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/rules/delete.html">Supprimer une règle</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/config/index.html">Gestion de la configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/config/initialize.html">Initialiser la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/config/consult.html">Consulter la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/config/modify.html">Modifier la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/config/delete.html">Supprimer la configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/limits/index.html">Gestion de la bande passante</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/limits/initialize.html">Modifier les limites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/limits/consult.html">Consulter les limites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/limits/modify.html">Modifier les limites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/limits/delete.html">Supprimer les limites</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/server/index.html">Commandes serveur</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/status.html">Consulter le statut du serveur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/deactivate.html">Désactiver le serveur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/shutdown.html">Éteindre le serveur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/reboot.html">Redémarrer le serveur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/logs.html">Exporter les logs de transferts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/import_config.html">Importer la configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/server/export_config.html">Exporter la configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/filemonitors/index.html">Gestion des FileMonitors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../interface/restv2/filemonitors/list.html">Lister les FileMonitors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../interface/restv2/index.html#documentation-complete">Documentation complète</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Référence des commandes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/server.html">Waarp R66 Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli/server.html#gestion-du-service">Gestion du service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-start">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">start</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-stop">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">stop</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-status">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">status</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-restart">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">restart</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cli/server.html#autres-commandes">Autres commandes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-initdb">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">initdb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-loadauth">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">loadauth</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-loadrule">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">loadrule</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/server.html#commande-waarp-r66server-loadconf">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66server</span> <span class="pre">loadconf</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli/client.html">Waarp R66 Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli/client.html#commandes-de-gestion-des-transferts">Commandes de gestion des transferts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-send">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">send</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-asend">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">asend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-msend">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">msend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-masend">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">masend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-transfer">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">transfer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-getinfo">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">getinfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-gui">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">gui</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cli/client.html#autres-commandes">Autres commandes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-initdb">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">initdb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-loadconf">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">loadconf</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-log-export">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">log-export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-config-export">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">config-export</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cli/client.html#commande-waarp-r66client-icaptest">Commande <code class="docutils literal notranslate"><span class="pre">waarp-r66client</span> <span class="pre">icaptest</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli/raw.html">Commandes Java brutes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli/raw.html#options-additionnelles-pour-waarp-via-la-jvm">Options additionnelles pour Waarp via la JVM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli/raw.html#org-waarp-client-message"><code class="docutils literal notranslate"><span class="pre">org.waarp.client.Message</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli/raw.html#org-waarp-client-businessrequest"><code class="docutils literal notranslate"><span class="pre">org.waarp.client.BusinessRequest</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli/sample.html">Exemples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli/sample.html#serveur">Serveur</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli/sample.html#client">Client</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Référence des fichiers de configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="server.html"><code class="docutils literal notranslate"><span class="pre">server.xml</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-identity">Section <code class="docutils literal notranslate"><span class="pre">identity</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-server">Section <code class="docutils literal notranslate"><span class="pre">server</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-network">Section <code class="docutils literal notranslate"><span class="pre">network</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-ssl">Section <code class="docutils literal notranslate"><span class="pre">ssl</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-directory">Section <code class="docutils literal notranslate"><span class="pre">directory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-limit">Section <code class="docutils literal notranslate"><span class="pre">limit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-db">Section <code class="docutils literal notranslate"><span class="pre">db</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-rest">Section <code class="docutils literal notranslate"><span class="pre">rest</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-business">Section <code class="docutils literal notranslate"><span class="pre">business</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-roles">Section <code class="docutils literal notranslate"><span class="pre">roles</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-aliases">Section <code class="docutils literal notranslate"><span class="pre">aliases</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-extendtaskfactory">Section <code class="docutils literal notranslate"><span class="pre">ExtendTaskFactory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-pushmonitor">Section <code class="docutils literal notranslate"><span class="pre">pushMonitor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html#section-extraoptions">Section <code class="docutils literal notranslate"><span class="pre">ExtraOptions</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="server.html#mise-a-jour-automatique-de-la-base-de-donnees">Mise à jour automatique de la base de données</a></li>
<li class="toctree-l4"><a class="reference internal" href="server.html#partage-d-une-meme-base-entre-plusieurs-moniteurs-waarp">Partage d’une même base entre plusieurs moniteurs Waarp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="server.html#exemple-complet">Exemple complet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="client.html"><code class="docutils literal notranslate"><span class="pre">client.xml</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-identity">Section <code class="docutils literal notranslate"><span class="pre">identity</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-client">Section <code class="docutils literal notranslate"><span class="pre">client</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-ssl">Section <code class="docutils literal notranslate"><span class="pre">ssl</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-directory">Section <code class="docutils literal notranslate"><span class="pre">directory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-limit">Section <code class="docutils literal notranslate"><span class="pre">limit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-db">Section <code class="docutils literal notranslate"><span class="pre">db</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#section-extendtaskfactory">Section <code class="docutils literal notranslate"><span class="pre">ExtendTaskFactory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#exemple-complet">Exemple complet</a></li>
<li class="toctree-l3"><a class="reference internal" href="client.html#exemple-complet-minimaliste-pour-empreinte-memoire-minimale">Exemple complet minimaliste pour empreinte mémoire minimale</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="snmp.html"><code class="docutils literal notranslate"><span class="pre">snmpconfig.xml</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="snmp.html#section-config">Section <code class="docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="snmp.html#section-targets">Section <code class="docutils literal notranslate"><span class="pre">targets</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="snmp.html#section-securities">Section <code class="docutils literal notranslate"><span class="pre">securities</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="snmp.html#exemple-complet">Exemple complet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rule.html"><code class="docutils literal notranslate"><span class="pre">rule.xml</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Type de Task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#format-general-d-une-tache">Format général d’une tâche</a></li>
<li class="toctree-l3"><a class="reference internal" href="#taches-informatives">Tâches informatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#log">LOG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#snmp">SNMP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taches-agissant-sur-l-emplacement-du-fichier">Tâches agissant sur l’emplacement du fichier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#copy">COPY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copyrename">COPYRENAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#move">MOVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#moverename">MOVERENAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linkrename">LINKRENAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rename">RENAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete">DELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#validfilepath">VALIDFILEPATH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taches-agissant-sur-le-fichier">Tâches agissant sur le fichier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tar">TAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zip">ZIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compress">COMPRESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transcode">TRANSCODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unzeroed">UNZEROED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chkfile">CHKFILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chmod">CHMOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#icap">ICAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taches-executant-un-sous-traitement">Tâches exécutant un sous-traitement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exec">EXEC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#execmove">EXECMOVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#execoutput">EXECOUTPUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#execjava">EXECJAVA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restart">RESTART</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taches-executant-un-transfert">Tâches exécutant un transfert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transfer">TRANSFER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reschedule">RESCHEDULE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ftp">FTP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taches-agissant-sur-l-emplacement-du-fichier-via-un-stockage-s3">Tâches agissant sur l’emplacement du fichier via un stockage S3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#s3get">S3GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s3getdelete">S3GETDELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s3delete">S3DELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s3put">S3PUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s3putr66delete">S3PUTR66DELETE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authent.html"><code class="docutils literal notranslate"><span class="pre">authent.xml</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="authent.html#section-entry">Section <code class="docutils literal notranslate"><span class="pre">entry</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bdd/index.html">Référence de la base de données</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bdd/referentiels.html">Référentiels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdd/referentiels.html#referentiels-communs">Référentiels communs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bdd/referentiels.html#updatedinfo"><code class="docutils literal notranslate"><span class="pre">updatedinfo</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../bdd/referentiels.html#table-runner">Table <code class="docutils literal notranslate"><span class="pre">runner</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bdd/referentiels.html#globalstep-et-globallaststep"><code class="docutils literal notranslate"><span class="pre">globalstep</span></code> et <code class="docutils literal notranslate"><span class="pre">globallaststep</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../bdd/referentiels.html#infostatus-et-stepstatus"><code class="docutils literal notranslate"><span class="pre">infostatus</span></code> et <code class="docutils literal notranslate"><span class="pre">stepstatus</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Liste des changements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#non-publie">Non publié</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-6-0-2021-04-03">Waarp R66 3.6.0 (2021-04-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#nouvelles-fonctionnalites">Nouvelles fonctionnalités</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#correctifs">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-5-2-2021-03-03">Waarp R66 3.5.2 (2021-03-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id1">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-5-1-2020-09-01">Waarp R66 3.5.1 (2020-09-01)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id2">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-5-0-2020-09-01">Waarp R66 3.5.0 (2020-09-01)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id3">Nouvelles fonctionnalités</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id4">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-4-0-2020-07-17">Waarp R66 3.4.0 (2020-07-17)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id5">Nouvelles fonctionnalités</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#evolutions">Évolutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id6">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-3-4-2020-06-02">Waarp R66 3.3.4 (2020-06-02)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id7">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-3-3-2020-05-07">Waarp R66 3.3.3 (2020-05-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id8">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-3-2-2020-04-21">Waarp R66 3.3.2 (2020-04-21)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id9">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-3-1-2020-02-17">Waarp R66 3.3.1 (2020-02-17)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id10">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-3-0-2020-01-18">Waarp R66 3.3.0 (2020-01-18)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#ameliorations">Améliorations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-2-0-2019-10-25">Waarp R66 3.2.0 (2019-10-25)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#securite">Sécurité</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#nouveautes">Nouveautés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id11">Améliorations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id12">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-1-0-1-non-publiee">Waarp R66 3.1.0-1 (non publiée)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id13">Sécurité</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id14">Nouveautés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id15">Améliorations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id16">Correctifs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#depreciations">Dépréciations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-0-12-1-2019-05-10">Waarp R66 3.0.12-1 (2019-05-10)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id17">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-0-11-1-2019-02-20">Waarp R66 3.0.11-1 (2019-02-20)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id18">Correctifs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#packaging">Packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-0-10-1-2018-10-08">Waarp R66 3.0.10-1 (2018-10-08)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id19">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-0-9-2-2018-07-16">Waarp R66 3.0.9-2 (2018-07-16)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id20">Correctifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#waarp-r66-3-0-9-2018-01-08">Waarp R66 3.0.9 (2018-01-08)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id21">Correctifs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <ul>
            <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
            </ul>
        
        
      </div>

      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Waarp R66</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Référence des fichiers de configuration</a> &raquo;</li>
      
    <li>Type de Task</li>
      <li class="wy-breadcrumbs-aside">
        
        
            <a href="../_sources/configuration-details/detail-tasks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>

<div class="admonition warning">
  <p class="first admonition-title">Avertissement</p>
  <p class="last">Cette documentation est en cours d'écriture et peut être 
  incomplète ou imprécise. Nous travaillons à l'améliorer.</p>
</div>
          <div role="main" class="document">
            
  <div class="section" id="type-de-task">
<h1>Type de Task<a class="headerlink" href="#type-de-task" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="format-general-d-une-tache">
<h2>Format général d’une tâche<a class="headerlink" href="#format-general-d-une-tache" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.6.0: </span>Ajout de l’option <code class="docutils literal notranslate"><span class="pre">#COMPRESS#</span></code> qui, avec la configuration du serveur <code class="docutils literal notranslate"><span class="pre">compression</span></code> à Vrai,
permet de compresser un transfert en accord avec le partenaire (qui peut ne pas supporter la
compression et donc celle-ci sera non activée pour ce transfert).</p>
</div>
<p>Une tâche est définie selon un format unifié XML :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
 <span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>NAME<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>path<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>x<span class="nt">&lt;/delay&gt;</span>
  <span class="nt">&lt;rank&gt;</span>n<span class="nt">&lt;/rank&gt;</span>
 <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Type</span></code> est l’identifiant du type de tâche à exécuter (les types sont présentés ci-après.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Path</span></code> est un argument fixé par la règle et dont des remplacements de mots clefs sont opérés :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">#TRUEFULLPATH#</span></code> : Chemin complet du fichier courant</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#TRUEFILENAME#</span></code> : Nom du fichier courant (hors chemin) (différent côté réception)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ORIGINALFULLPATH#</span></code> : Chemin complet du fichier d’origine (avant changement côté réception)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ORIGINALFILENAME#</span></code> : Nom du fichier d’origine (avant changement côté réception)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#FILESIZE#</span></code> : Taille du fichier s’il existe</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#INPATH#</span></code> : Chemin du dossier de réception</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#OUTPATH#</span></code> : Chemin du dossier d’émission</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#WORKPATH#</span></code> : Chemin du dossier de travail</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ARCHPATH#</span></code> : Chemin du dossier d’archive</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#HOMEPATH#</span></code> : Chemin du dossier du répertoire « racine » de Waarp</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#RULE#</span></code> : Règle utilisé pour le transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#DATE#</span></code> : Date courante au format yyyyMMdd</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#HOUR#</span></code> : Heure courante au format HHmmss</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#REMOTEHOST#</span></code> : Nom DNS du partenaire</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#REMOTEHOSTIP#</span></code> : IP du partenaire</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#LOCALHOST#</span></code> : Nom DNS local du serveur Waarp</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#LOCALHOSTIP#</span></code> : IP du serveur Waarp</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#TRANSFERID#</span></code> : Identifiant de transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#REQUESTERHOST#</span></code> : Nom du partenaire initiateur du transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#REQUESTEDHOST#</span></code> : Nom du partenaire recevant la demande de transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#FULLTRANSFERID#</span></code> : Identifiant complet du transfert comme <code class="docutils literal notranslate"><span class="pre">TRANSFERID_REQUESTERHOST_REQUESTEDHOST</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#RANKTRANSFER#</span></code> : Rang du bloc courant ou final du fichier transféré</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#BLOCKSIZE#</span></code> : Taille du bloc utilisé</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ERRORMSG#</span></code> : Le message d’erreur courant ou « NoError » si aucune erreur n’a été levée jusqu’à cet
appel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ERRORCODE#</span></code> : Le code erreur courant ou <code class="docutils literal notranslate"><span class="pre">-</span></code> (<code class="docutils literal notranslate"><span class="pre">Unknown</span></code>) si aucune erreur n’a été levée jusqu’à
cet appel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#ERRORSTRCODE#</span></code> : Le message lié au code d’erreur courant ou <code class="docutils literal notranslate"><span class="pre">Unknown</span></code> si aucune erreur n’a été
levée jusqu’à cet appel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#NOWAIT#</span></code> : Utilisé par la tâche EXEC pour spécifier que la commande est à exécuter en mode asynchrone,
sans en attendre le résultat</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#LOCALEXEC#</span></code> : Utilisé par la tâche EXEC pour spécifier que la commande est à exécuter de manière
distante (pas dans la JVM courante) mais au travers d’un démon <code class="docutils literal notranslate"><span class="pre">LocalExec</span></code> (spécifié dans la
configuration globale</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMPRESS</span></code> : Utilisé en complément de l’option <code class="docutils literal notranslate"><span class="pre">compression</span></code> dans la configuration du serveur
pour indiquer la demande de pouvoire compresser par bloc un transfert (si le partenaire ne dispose
pas de l’option de compression, cela sera refusé).</p></li>
</ul>
</li>
</ul>
<p>Par exemple, un <code class="docutils literal notranslate"><span class="pre">Path</span></code> défini comme :
<code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">#DATE#</span> <span class="pre">some2</span> <span class="pre">#TRANSFERID#</span> <span class="pre">some3</span> <span class="pre">#REMOTEHOST#</span> <span class="pre">some4</span></code>
donnera
<code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">20130529</span> <span class="pre">some2</span> <span class="pre">123456789123</span> <span class="pre">some3</span> <span class="pre">remotehostid</span> <span class="pre">some4</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est généralement le délai (si précisé) maximum pour l’exécution d’une tâche avant qu’elle tombe
en erreur pour dépassement de délai.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Rank</span></code> est optionnel et permet d’indiquer un rang d’exécution des tâches, laissant une souplesse sur
l’ordre d’écriture en période de tests. Il n’est pas conseillé de l’utiliser par défaut hormis pour les
tests et validation de plusieurs tâches.</p></li>
</ul>
<p>De plus, une tâche utilisera les arguments de transfert eux-même (<code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>) pour déduire
les paramètres finaux en utilisant la fonction
<code class="docutils literal notranslate"><span class="pre">String.format(path</span> <span class="pre">règle,</span> <span class="pre">info</span> <span class="pre">transfert.éclaté</span> <span class="pre">en</span> <span class="pre">sous</span> <span class="pre">chaînes</span> <span class="pre">via</span> <span class="pre">le</span> <span class="pre">séparateur</span> <span class="pre">&quot;</span> <span class="pre">&quot;)</span></code></p>
<p>L’argument de transfert (spécifié par <code class="docutils literal notranslate"><span class="pre">-info</span></code> dans les commandes de transferts) ou le <code class="docutils literal notranslate"><span class="pre">path</span></code> peuvent
contenir une MAP au format JSON qui intègre des éléments utiles aux tâches ou au fonctionnement de Waarp
(comme le <code class="docutils literal notranslate"><span class="pre">DIGEST</span></code>, le <code class="docutils literal notranslate"><span class="pre">RESCHDEDULE</span></code>, l’option <code class="docutils literal notranslate"><span class="pre">follow</span></code>).</p>
<p>Ceci permet de rendre les arguments très adaptatifs.</p>
<p>Par exemple :</p>
<ul class="simple">
<li><p>si la règle définie <code class="docutils literal notranslate"><span class="pre">Path</span></code> comme <code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">%s</span> <span class="pre">some2</span> <span class="pre">%d</span> <span class="pre">some3</span> <span class="pre">%s</span> <span class="pre">some4</span></code></p></li>
<li><p>et si les informations de transferts sont <code class="docutils literal notranslate"><span class="pre">info1</span> <span class="pre">1</span> <span class="pre">info2</span></code></p></li>
<li><p>Le résultat sera pour cette tâche : <code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">info1</span> <span class="pre">some2</span> <span class="pre">1</span> <span class="pre">some3</span> <span class="pre">info2</span> <span class="pre">some4</span></code></p></li>
</ul>
</div>
<div class="section" id="taches-informatives">
<h2>Tâches informatives<a class="headerlink" href="#taches-informatives" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="log">
<h3>LOG<a class="headerlink" href="#log" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche loggue ou écrit dans un fichier externe des informations :</p>
<ul class="simple">
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 0, aucune sortie ne sera effectuée</p></li>
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 1, les informations seront envoyées vers un log</p></li>
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 2, les informations seront envoyées dans un fichier (le dernier argument sera le chemin
complet du fichier de sortie)</p></li>
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 3, les informations seront envoyées dans le log et dans un fichier (le dernier argument
sera le chemin complet du fichier de sortie)</p></li>
</ul>
<p>Si le premier mot de ce log est un parmi <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code> ou <code class="docutils literal notranslate"><span class="pre">error</span></code>, ce sera le niveau du
log utilisé.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>LOG<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>warn information /path/logfile<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>2<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci logguera un log « WARN » dans le fichier <code class="docutils literal notranslate"><span class="pre">/path/logfile</span></code> sans trace dans les logs usuels.</p>
</div>
<div class="section" id="snmp">
<h3>SNMP<a class="headerlink" href="#snmp" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche émet un trap SNMP :</p>
<ul class="simple">
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 0, un trap SNMP warning/info est envoyé avec le champ info et le transfer ID</p></li>
<li><p>si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est 1, un trap SNMP/info avec toutes les informations de transfert sont envoyées</p></li>
</ul>
<p>Si le premier mot de ce log est un parmi <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code> ou <code class="docutils literal notranslate"><span class="pre">error</span></code>, ce sera le niveau du
log utilisé.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>SNMP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>information<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>0<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci enverra un trap SNMP/info contenant <code class="docutils literal notranslate"><span class="pre">information</span></code> et le TransferID.</p>
</div>
</div>
<div class="section" id="taches-agissant-sur-l-emplacement-du-fichier">
<h2>Tâches agissant sur l’emplacement du fichier<a class="headerlink" href="#taches-agissant-sur-l-emplacement-du-fichier" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="copy">
<h3>COPY<a class="headerlink" href="#copy" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier au chemin désigné comme argument sans renommer le fichier (même nom de base). Le chemin
obtenu sera un chemin absolu (et non un chemin relatif).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> et Transfer Information sont ignorés.</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>COPY<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Cela copiera le fichier courant vers <code class="docutils literal notranslate"><span class="pre">/newpath/</span></code> en tant que <code class="docutils literal notranslate"><span class="pre">/newpath/currentfilename</span></code>. Le fichier
courant reste le même (inchangé).</p>
</div>
<div class="section" id="copyrename">
<h3>COPYRENAME<a class="headerlink" href="#copyrename" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier au chemin désigné comme argument en renommant le fichier. Le chemin
obtenu sera un chemin absolu (et non un chemin relatif).</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).
Le chemin obtenu doit être un chemin absolu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>COPYRENAME<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/newfilename_%s_#TRANSFERID#<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Si le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> est <code class="docutils literal notranslate"><span class="pre">myinfoFromTransfer</span></code>, cela copiera le fichier dans un nouveau
fichier nommé <code class="docutils literal notranslate"><span class="pre">/newpath/newfilename_myinfoFromTransfer_transferid</span></code> où <code class="docutils literal notranslate"><span class="pre">transferid</span></code> sera remplacé par
un identifiant unique (comme 123456789). Le fichier courant reste le même (inchangé).</p>
</div>
<div class="section" id="move">
<h3>MOVE<a class="headerlink" href="#move" title="Lien permanent vers ce titre">¶</a></h3>
<p>Déplace le fichier au chemin désigné comme argument sans renommer le fichier (même nom de base). Le chemin
obtenu sera un chemin absolu (et non un chemin relatif).</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).
Le chemin obtenu doit être un chemin absolu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>MOVE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Le fichier sera déplacé (non copié) dans le répertoire <code class="docutils literal notranslate"><span class="pre">/newpath/</span></code>. Le fichier courant est maintenant
celui déplacé.</p>
</div>
<div class="section" id="moverename">
<h3>MOVERENAME<a class="headerlink" href="#moverename" title="Lien permanent vers ce titre">¶</a></h3>
<p>Déplace le fichier au chemin désigné comme argument en renommant le fichier. Le chemin
obtenu sera un chemin absolu (et non un chemin relatif).</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).
Le chemin obtenu doit être un chemin absolu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>MOVERENAME<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/newfilename<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Le fichier sera déplacé (non copié) dans le répertoire <code class="docutils literal notranslate"><span class="pre">/newpath/</span></code> avec comme nouveau nom
<code class="docutils literal notranslate"><span class="pre">/newpath/newfilename</span></code>. Le fichier courant est maintenant celui déplacé.</p>
</div>
<div class="section" id="linkrename">
<h3>LINKRENAME<a class="headerlink" href="#linkrename" title="Lien permanent vers ce titre">¶</a></h3>
<p>Crée un lien vers le fichier courant et pointe dessus.</p>
<ul class="simple">
<li><p>Le lien est d’abord tenté en mode « hard link », puis « soft link » et si ce n’est pas possible (non
supporté par le système de fichiers), il crée une copie avec le nouveau nom.</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).
Le chemin obtenu doit être un chemin absolu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>LINKRENAME<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/filenamelink<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Le fichier sera un lien dans le répertoire <code class="docutils literal notranslate"><span class="pre">/newpath/</span></code> avec pour nom <code class="docutils literal notranslate"><span class="pre">filenamelink</span></code> (ou une copie si ce
n’est pas possible).</p>
</div>
<div class="section" id="rename">
<h3>RENAME<a class="headerlink" href="#rename" title="Lien permanent vers ce titre">¶</a></h3>
<p>Renomme le fichier au chemin désigné comme argument. Le chemin
obtenu sera un chemin absolu (et non un chemin relatif).</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).
Le chemin obtenu doit être un chemin absolu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>RENAME<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/newpath/newfilename<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Le fichier sera déplacé avec le nouveau nom spécifié. Le fichier est marqué comme déplacé.</p>
</div>
<div class="section" id="delete">
<h3>DELETE<a class="headerlink" href="#delete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche efface le fichier courant.</p>
<ul class="simple">
<li><p>Le fichier courant n’est plus valide.</p></li>
<li><p>Aucun autre argument n’est pris en compte.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>DELETE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path/&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Le fichier courant est effacé. En conséquence, plus aucune action ne peut être opérée sur le
fichier. Note : si le fichier ne peut pas être effacé, un Warning sera levé.</p>
</div>
<div class="section" id="validfilepath">
<h3>VALIDFILEPATH<a class="headerlink" href="#validfilepath" title="Lien permanent vers ce titre">¶</a></h3>
<p>Teste si le fichier courant est sous l’un des dossiers obtenus depuis le <code class="docutils literal notranslate"><span class="pre">Path</span></code> ou les <code class="docutils literal notranslate"><span class="pre">Transfer</span>
<span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Le résultat devra être : <code class="docutils literal notranslate"><span class="pre">path1</span> <span class="pre">path2</span> <span class="pre">...</span></code> où chaque chemin est séparé par un « blanc ».</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">Delay</span></code> n’est pas 0, un log sera produit.</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>VALIDFILEPATH<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path1/ /path2/<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>1<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci vérifiera si le fichier courant est dans un des dossiers spécifiés, ici <code class="docutils literal notranslate"><span class="pre">/path1</span></code> ou <code class="docutils literal notranslate"><span class="pre">/path2</span></code>.
Et il fera une sortie log pour enregistrer le résultat de cette vérification.</p>
</div>
</div>
<div class="section" id="taches-agissant-sur-le-fichier">
<h2>Tâches agissant sur le fichier<a class="headerlink" href="#taches-agissant-sur-le-fichier" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="tar">
<h3>TAR<a class="headerlink" href="#tar" title="Lien permanent vers ce titre">¶</a></h3>
<p>Crée un TAR depuis les arguments comme source et destination ou un UNTAR des fichiers depuis une archive TAR.</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">1</span></code>, l’archive tar indiquée en premier argument est
<strong>extraite</strong> dans le dossier indiqué en second argument (le <code class="docutils literal notranslate"><span class="pre">path</span></code>
<code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">destDir</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">xf</span> <span class="pre">archiveFile</span> <span class="pre">-C</span> <span class="pre">destDir</span></code>)</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">2</span></code>, l’archive tar indiquée en premier argument est
<strong>crée</strong> avec le contenu du dossier indiqué en second argument (le <code class="docutils literal notranslate"><span class="pre">path</span></code>
<code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">sourceDir</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">cf</span> <span class="pre">archiveFile</span> <span class="pre">sourceDir</span></code>)</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">3</span></code>, l’archive tar indiquée en premier argument est
<strong>crée</strong> avec les fichiers indiqués dans les arguments suivants (le
<code class="docutils literal notranslate"><span class="pre">path</span></code> <code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">sourceFile1</span> <span class="pre">sourceFile2</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">cf</span> <span class="pre">archiveFile</span> <span class="pre">sourceFile1</span> <span class="pre">sourceFile2</span></code>)</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>TAR<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/sourcetarfile /path/targetdirectory/<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>1<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci déclenchera un <code class="docutils literal notranslate"><span class="pre">UNTAR</span></code> depuis l’archive TAR <code class="docutils literal notranslate"><span class="pre">/path/sourcetarfile</span></code>
vers le dossier <code class="docutils literal notranslate"><span class="pre">/path/targetdirectory</span></code>. Le fichier n’est pas marqué comme
déplacé.</p>
</div>
<div class="section" id="zip">
<h3>ZIP<a class="headerlink" href="#zip" title="Lien permanent vers ce titre">¶</a></h3>
<p>Crée un ZIP depuis les arguments comme source et destination ou un UNZIP des fichiers depuis une archive ZIP.</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme <code class="docutils literal notranslate"><span class="pre">String</span>
<span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">1</span></code>, l’archive zip indiquée en premier argument est
<strong>extraite</strong> dans le dossier indiqué en second argument (le <code class="docutils literal notranslate"><span class="pre">path</span></code>
<code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">destDir</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">unzip</span> <span class="pre">archiveFile</span> <span class="pre">-d</span> <span class="pre">destDir</span></code>)</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">2</span></code>, l’archive zip indiquée en premier argument est
<strong>crée</strong> avec le contenu du dossier indiqué en second argument (le <code class="docutils literal notranslate"><span class="pre">path</span></code>
<code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">sourceDir</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">-r</span> <span class="pre">archiveFile</span> <span class="pre">sourceDir</span></code>)</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">3</span></code>, l’archive zip indiquée en premier argument est
<strong>crée</strong> avec les fichiers indiqués dans les arguments suivants (le
<code class="docutils literal notranslate"><span class="pre">path</span></code> <code class="docutils literal notranslate"><span class="pre">archiveFile</span> <span class="pre">sourceFile1</span> <span class="pre">sourceFile2</span></code> équivaut à la commande
<code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">archiveFile</span> <span class="pre">sourceFile1</span> <span class="pre">sourceFile2</span></code>)</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>ZIP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/sourcetarfile /path/targetdirectory/<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>1<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci déclenchera un <code class="docutils literal notranslate"><span class="pre">UNZIP</span></code> depuis l’archive ZIP <code class="docutils literal notranslate"><span class="pre">/path/sourcetarfile</span></code>
vers le dossier <code class="docutils literal notranslate"><span class="pre">/path/targetdirectory</span></code>. Le fichier n’est pas marqué comme
déplacé.</p>
</div>
<div class="section" id="compress">
<h3>COMPRESS<a class="headerlink" href="#compress" title="Lien permanent vers ce titre">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.6.0: </span>La tâche de compression unitaire efficace et performante est ajoutée.</p>
</div>
<p>Crée un fichier compressé au format ZSTD depuis le fichier courant comme source et comme destination
si spécifié le nom du fichier, sinon le nom du fichier existant avec l’extension <code class="docutils literal notranslate"><span class="pre">.zstd</span></code>, ou inversement
décompresse le fichier courant vers le om du fichier spécifié, et si non spécifié le nom du fichier courant
existant avec l’extension <code class="docutils literal notranslate"><span class="pre">.unzstd</span></code>.</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme <code class="docutils literal notranslate"><span class="pre">String</span>
<span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">1</span></code>, il s’agit d’une décompression</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">delay</span></code> est <code class="docutils literal notranslate"><span class="pre">0</span></code>, il s’agit d’une compression</p></li>
<li><p>Le fichier est marqué comme déplacé et modifié pour la nouvelle cible.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>COMPRESS<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/targetdirectory/newFile.zstd<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>0<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci déclenchera une compression au format ZSTD du fichier courant vers
vers le fichier <code class="docutils literal notranslate"><span class="pre">/path/targetdirectory/newFile.zstd</span></code>.
Le fichier est marqué comme déplacé avec ce nouveau fichier.</p>
</div>
<div class="section" id="transcode">
<h3>TRANSCODE<a class="headerlink" href="#transcode" title="Lien permanent vers ce titre">¶</a></h3>
<p>Permet de transcoder un fichier d’un ensemble de codage vers un autre.</p>
<p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-from</span> <span class="pre">fromCharset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-to</span> <span class="pre">toCharset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-newfile</span> <span class="pre">filename</span></code> argument optionnel : si non utilisé, ce sera le nom du fichier courant plus
<code class="docutils literal notranslate"><span class="pre">.extension</span></code> (usuellement <code class="docutils literal notranslate"><span class="pre">transcode</span></code>) ; si utilisé, aucune extension ne sera ajoutée</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-extension</span> <span class="pre">extension</span></code> argument optionnel : si non utilisé, le fichier produit sera
<code class="docutils literal notranslate"><span class="pre">filename.transcode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-dos2unix</span></code> or <code class="docutils literal notranslate"><span class="pre">-unix2dos</span></code> argument optionnel, mais si présent, <code class="docutils literal notranslate"><span class="pre">-from</span></code> et <code class="docutils literal notranslate"><span class="pre">-to</span></code> peuvent être
ignorés ; ceci autorise des actions <code class="docutils literal notranslate"><span class="pre">dos2unix</span></code>/<code class="docutils literal notranslate"><span class="pre">unix2dos</span></code> à la fin du transcodage. Cette opération peut
être réalisée même sans les options <code class="docutils literal notranslate"><span class="pre">-from</span></code> ou <code class="docutils literal notranslate"><span class="pre">-to</span></code>, ce qui signifie que seule cette transformation
sera appliquée, sans transcodage.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">fromCharset</span></code> et <code class="docutils literal notranslate"><span class="pre">toCharset</span></code> sont des chaînes représentant les codages officiels disponibles en Java
dont.</p>
<p>Le fichier n’est pas marqué comme déplacé.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>TRANSCODE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-from fromCharset -to toCharset -newfile /path/file<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci transcodera le fichier courant depuis <code class="docutils literal notranslate"><span class="pre">fromCharset</span></code> vers <code class="docutils literal notranslate"><span class="pre">toCharset</span></code> et le résultat sera placé
dans le fichier <code class="docutils literal notranslate"><span class="pre">/path/file</span></code>.
Le fichier n’est pas marqué comme déplacé.</p>
<p>Une méthode en ligne de commande (depuis Waarp Common) permet d’obtenir une liste en html (<code class="docutils literal notranslate"><span class="pre">-html</span></code>), csv
(<code class="docutils literal notranslate"><span class="pre">-csv</span></code>) ou au format texte (<code class="docutils literal notranslate"><span class="pre">-text</span></code>) de tous les codages supportés par votre JVM. Pour l’utiliser,
exécuter la commande suivante :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="n">WaarpCommon</span><span class="o">-</span><span class="mf">1.2</span><span class="o">.</span><span class="mf">7.</span><span class="n">jar</span> \
  <span class="n">org</span><span class="o">.</span><span class="n">waarp</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">transcode</span><span class="o">.</span><span class="n">CharsetsUtil</span> \
  <span class="p">[</span><span class="o">-</span><span class="n">csv</span> <span class="o">|</span> <span class="o">-</span><span class="n">html</span> <span class="o">|</span> <span class="o">-</span><span class="n">text</span> <span class="p">]</span>
</pre></div>
</div>
<p>Elle peut également être utilisé pour transcoder des fichiers en dehors de R66.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="n">WaarpCommon</span><span class="o">-</span><span class="mf">1.2</span><span class="o">.</span><span class="mf">7.</span><span class="n">jar</span> \
  <span class="n">org</span><span class="o">.</span><span class="n">waarp</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">transcode</span><span class="o">.</span><span class="n">CharsetsUtil</span> \
  <span class="o">-</span><span class="kn">from</span> <span class="nn">fromFilename</span> <span class="n">fromCharset</span> <span class="o">-</span><span class="n">to</span> <span class="n">toFilename</span> <span class="n">toCharset</span>
</pre></div>
</div>
<div class="section" id="codages-supportes">
<h4>Codages supportés<a class="headerlink" href="#codages-supportes" title="Lien permanent vers ce titre">¶</a></h4>
<p>Parmi les ensembles de codages, les plus connus sont :</p>
<ul class="simple">
<li><p>France: IBM297 or IBM01147</p></li>
<li><p>Italy: IBM280 or IBM01144</p></li>
<li><p>UK: IBM285 or IBM01146</p></li>
<li><p>International (Switzerland, Belgium): IBM500 or IBM01148</p></li>
<li><p>Austria/Germany: IBM273 or IBM01141</p></li>
<li><p>Spain and Latin America: IBM284 or IBM01145</p></li>
<li><p>Portugal, Brazil, USA, Canada, Netherlands: IBM037 or IBM01140</p></li>
<li><p>Central and Eastern Europe: IBM870</p></li>
<li><p>Cyrillic: x-IBM1025 (x-IBM1381?)</p></li>
<li><p>Turkey: IBM1026</p></li>
<li><p>Cyrillic Ukraine: x-IBM1123</p></li>
<li><p>Denmark, Norway: IBM277 or IBM01142</p></li>
<li><p>Finland or Sweden: IBM278 or IBM01143</p></li>
<li><p>Greece: x-IBM875 or x-IBM1124</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<ul class="simple">
<li><p><a class="reference external" href="http://publib.boulder.ibm.com/infocenter/pcomhelp/v5r9/topic/com.ibm.pcomm.doc/reference/html/hcp_reference.htm">référence IBM des code pages</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="unzeroed">
<h3>UNZEROED<a class="headerlink" href="#unzeroed" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche ajoute un octet à un fichier si celui-ci est vide (de taille 0).</p>
<p>Cette tâche sera en erreur si le fichier est de taille 0 mais ne peut pas être « unzeroed ». Si le chemin est
non vide, le contenu sera utilisé comme remplissage du le fichier vide. S’il est vide, le caractère « blanc »
sera utilisé.</p>
<p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p>
<ul class="simple">
<li><p>Si <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est 1, la tâche produira un log de niveau info</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est 2, la tâche produira un log de niveau warn</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>UNZEROED<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>optional<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>1<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci remplira le fichier courant s’il est vide avec le contenu « optional » et produiera un log de niveau
INFO en l’absence d’erreur, de niveau ERROR en cas d’erreur.</p>
</div>
<div class="section" id="chkfile">
<h3>CHKFILE<a class="headerlink" href="#chkfile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche vérifie différentes propriétés relatives au fichier courant en fonction des arguments.</p>
<p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SIZE</span> <span class="pre">LT/GT/LTE/GTE/EQ</span> <span class="pre">number</span></code></p>
<ul>
<li><p>vérifie la taille du fichier en fonction d’une limite (plus petit, plus grand, plus petit ou égal, plus
grand ou égal, égal)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DFCHECK</span></code></p>
<ul>
<li><p>vérifie que la taille du fichier à recevoir est compatible avec l’espace disponible restant tant sur
l’espace de travail que sur l’espace final de réception (depuis le contexte)</p></li>
</ul>
</li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>CHKFILE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>SIZE LT 1000000 SIZE GT 1000 DFCHECK<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci testera si le fichier est plus petit que 10 MO (base 10), plus grand que 1000 octets et si les
répertoires de travail et de réceptions ont assez d’espace pour y écrire le fichier (taille annoncée par
l’émetteur).</p>
</div>
<div class="section" id="chmod">
<h3>CHMOD<a class="headerlink" href="#chmod" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche permet de modifier les droits du fichier (comme la commande <code class="docutils literal notranslate"><span class="pre">CHMOD</span></code> sous Unix) avec les
arguments suivants :</p>
<ul class="simple">
<li><p>le chemin complet est celui du fichier courant</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>les arguments in fine seront de la forme <code class="docutils literal notranslate"><span class="pre">[ua][+-=][rwx]</span></code> où de multiples répétitions peuvent être
spécifiées, séparées par un caractère <code class="docutils literal notranslate"><span class="pre">blanc</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">u/a</span></code> signifiant l’utilisateur (Utilisateur système Waarp)/all (tous) (groupe et autre n’existent pas
en Java),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+/-/=</span></code> signifiant l’ajout, le retrait ou l’affectation (l’affectation signifie que tous les autres
droits sont retirés),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r/w/x</span></code> signifiant Read/Write/Execute (Lecture/Ecriture/Exécution)</p></li>
</ul>
</li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Par exemple :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">u=rwx</span> <span class="pre">a=r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ua+rw</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u=rw</span> <span class="pre">a-wx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a+rw</span></code></p></li>
</ul>
</div></blockquote>
<p>Si plusieurs modes sont indiqués, ils seront exécutés en séquence.  Ainsi <code class="docutils literal notranslate"><span class="pre">a=r</span> <span class="pre">a+w</span> <span class="pre">a-r</span></code> donnera <code class="docutils literal notranslate"><span class="pre">a=w</span></code>.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>CHMOD<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>a=r a+w a-r<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="icap">
<span id="task-icap"></span><h3>ICAP<a class="headerlink" href="#icap" title="Lien permanent vers ce titre">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.4.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Une documentation complète d’installation au regard des interactions avec un serveur ICAP est disponible
<a class="reference internal" href="../usage/icap-configuration.html#setup-icap"><span class="std std-ref">ici</span></a></p>
</div>
<p>Cette tâche permet l’échange avec un serveur répondant à la norme RFC 3507 dite <cite>ICAP</cite>.
Elle permet de transférer le contenu du fichier vers un service ICAP via une commande
<cite>RESPMOD</cite> et d’obtenir la validation de ce fichier par le service (status <cite>204</cite>).</p>
<p>La liste des arguments est la suivante :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-file</span> <span class="pre">filename</span></code> spécifie le chemin du fichier sur lequel opérer (si le nom
est <code class="docutils literal notranslate"><span class="pre">EICARTEST</span></code>, un faux virus de test basé sur EICAR test sera envoyé).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-to</span> <span class="pre">hostname</span></code> spécifie l’adresse (via DNS ou IP) du serveur ICAP</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-port</span> <span class="pre">port</span></code>, défaut 1344]  spécifie le port à utiliser (défaut 1344)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-service</span> <span class="pre">name</span></code> | <code class="docutils literal notranslate"><span class="pre">-model</span> <span class="pre">name</span></code>  spécifie le service ou modèle ICAP à
utiliser</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-previewSize</span> <span class="pre">size</span></code>, défaut aucun] spécifie la taille de Preview à
utiliser (défaut négociée)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-blockSize</span> <span class="pre">size</span></code>, défaut 8192] spécifie la taille en émission à utiliser
(défaut 8192)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-receiveSize</span> <span class="pre">size</span></code>, défaut 65536] spécifie la taille en réception à
utiliser (défaut 65536)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-maxSize</span> <span class="pre">size</span></code>, défaut MAX_INTEGER] spécifie la taille maxmale d’un
fichier à utiliser (défaut MAX_INTEGER)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-timeout</span> <span class="pre">in_ms</span></code>, défaut equiv à 10 min] spécifie la limite de temps à
utiliser (défaut equiv à 10 min)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-keyPreview</span> <span class="pre">key</span> <span class="pre">-stringPreview</span> <span class="pre">string</span></code>, défaut aucun] spécifie la clef et
la chaîne associée pour Options à valider (défaut aucun)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-key204</span> <span class="pre">key</span> <span class="pre">-string204</span> <span class="pre">string</span></code>, défaut aucun] spécifie la clef et la
chaîne associée pour 204 ICAP à valider (défaut aucun)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-key200</span> <span class="pre">key</span> <span class="pre">-string200</span> <span class="pre">string</span></code>, défaut aucun] spécifie la clef et la
chaîne associée pour 200 ICAP à valider (défaut aucun)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-stringHttp</span> <span class="pre">string</span></code>, défaut aucun] spécifie la chaîne pour HTTP 200 ICAP
à valider (défaut aucun)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-logger</span> <span class="pre">DEBUG|INFO|WARN|ERROR</span></code>, défaut aucun] spécifie le niveau de log
entre <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> | <code class="docutils literal notranslate"><span class="pre">INFO</span></code> | <code class="docutils literal notranslate"><span class="pre">WARN</span></code> | <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> (défaut <code class="docutils literal notranslate"><span class="pre">WARN</span></code>)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-errorMove</span> <span class="pre">path</span></code> | <code class="docutils literal notranslate"><span class="pre">-errorDelete</span></code> | <code class="docutils literal notranslate"><span class="pre">-sendOnError</span></code>] spécifie l’action
en cas de scan erronné : un répertoire de quarantaine, l’effacement du
fichier, la retransmission (R66) vers un autre partenaire (mutuellement
exclusif) (défaut aucun)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-ignoreNetworkError</span></code>] spécifie que sur une erreur réseau, le fichier sera
considéré comme OK</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-ignoreTooBigFileError</span></code>] spécifie que sur une erreur de fichier trop
grand, le fichier sera considéré comme OK</p></li>
</ul>
<p>Si une commande R66 de retransfert est demandée (<code class="docutils literal notranslate"><span class="pre">-sendOnError</span></code>), la dernière option pour ICAP devra être
suivie de <code class="docutils literal notranslate"><span class="pre">--</span></code> avant de poursuivre sur les options usuelles pour la commande <code class="docutils literal notranslate"><span class="pre">TRANSFER</span></code>.</p>
<p>Exemple 1:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>ICAP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file #TRUEFULLPATH# -to hostname -service name
  -previewSize size -blockSize size -receiveSize size
  -maxSize size -timeout in_ms
  -keyPreview key -stringPreview string
  -key204 key -string204 string
  -key200 key -string200 string
  -stringHttp string -logger WARN -errorDelete
  -ignoreNetworkError<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ici, en cas de scan en erreur, le fichier sera effacé.</p>
<p>Exemple 2:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>ICAP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file #TRUEFULLPATH# -to hostname -model name
  -previewSize size -blockSize size -receiveSize size
  -maxSize size -timeout in_ms
  -keyPreview key -stringPreview string
  -key204 key -string204 string
  -key200 key -string200 string
  -stringHttp string -logger WARN -errorMove path
  -ignoreNetworkError<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ici, en cas de scan en erreur, le fichier sera déplacé dans un autre répertoire.</p>
<p>Exemple 3:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>ICAP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file #TRUEFULLPATH# -to hostname -model name
  -previewSize size -blockSize size -receiveSize size
  -maxSize size -timeout in_ms
  -keyPreview key -stringPreview string
  -key204 key -string204 string
  -key200 key -string200 string
  -stringHttp string -logger WARN -sendOnError
  -ignoreNetworkError -- -file #TRUEFULLPATH# -to
  requestedHost -rule rule [-copyinfo]
  [-info information]<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ici, en cas de scan en erreur, le fichier sera envoyé vers un autre serveur (l’effacement sera alors pris
en charge par la règle utilisée pour l’envoyer).</p>
<p>Exemple 4:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>ICAP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file #TRUEFULLPATH# -to hostname -model ICAP_AVSCAN
  -sendOnError -ignoreNetworkError -ignoreTooBigFileError --
  -file #TRUEFULLPATH# -to requestedHost -rule rule -copyinfo
  -info FILE INFECTED<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Même cas que l’exemple 3 plus minimaliste et réaliste.</p>
</div>
</div>
<div class="section" id="taches-executant-un-sous-traitement">
<h2>Tâches exécutant un sous-traitement<a class="headerlink" href="#taches-executant-un-sous-traitement" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="exec">
<h3>EXEC<a class="headerlink" href="#exec" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exécute une commande externe en fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Le <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est le temps maximum autorisé en millisecondes avant que la tâche ne soit considérée comme
en time out et donc en erreur.</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>La commande externe est supposée se comporter comme suit pour ses valeurs de retour :</p>
<ul class="simple">
<li><p>exit 0, pour une exécution correcte</p></li>
<li><p>exit 1, pour une exécution correcte mais avec avertissement</p></li>
<li><p>toute autre valeur pour une exécution en erreur</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>EXEC<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/command arguments #TRANSFERID# #TRUEFULLPATH# %s<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>En prenant en compte les transformations dynamiques, la commande <code class="docutils literal notranslate"><span class="pre">/path/command</span></code> sera exécutée avec les
arguments suivants :
<code class="docutils literal notranslate"><span class="pre">arguments</span> <span class="pre">transferId</span> <span class="pre">/path/currentFilename</span> <span class="pre">transferInformation</span></code>.</p>
</div>
<div class="section" id="execmove">
<h3>EXECMOVE<a class="headerlink" href="#execmove" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exécute une commande externe en fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Le <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est le temps maximum autorisé en millisecondes avant que la tâche ne soit considérée comme
en time out et donc en erreur.</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>La dernière ligne retournée par la commande externe est interprétée comme le nouveau chemin absolu du
fichier courant. La commande externe est responsable d’avoir réellement déplacer le fichier vers ce nouvel
emplacement.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>La commande externe est supposée se comporter comme suit pour ses valeurs de retour :</p>
<ul class="simple">
<li><p>exit 0, pour une exécution correcte</p></li>
<li><p>exit 1, pour une exécution correcte mais avec avertissement</p></li>
<li><p>toute autre valeur pour une exécution en erreur</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>EXECMOVE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/command arguments #TRANSFERID# #TRUEFULLPATH# %s<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>En prenant en compte les transformations dynamiques, la commande <code class="docutils literal notranslate"><span class="pre">/path/command</span></code> sera exécutée avec les
arguments suivants :
<code class="docutils literal notranslate"><span class="pre">arguments</span> <span class="pre">transferId</span> <span class="pre">/path/currentFilename</span> <span class="pre">transferInformation</span></code>.
La dernière ligne retournée par la commande externe est interprétée comme le nouveau chemin absolu du
fichier courant.</p>
</div>
<div class="section" id="execoutput">
<h3>EXECOUTPUT<a class="headerlink" href="#execoutput" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exécute une commande externe en fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Le <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est le temps maximum autorisé en millisecondes avant que la tâche ne soit considérée comme
en time out et donc en erreur.</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Toutes les lignes retournées par la commande externe (sortie standard) sont interprétées comme un
possible message d’erreur.</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé, sauf en cas d’erreur et si <code class="docutils literal notranslate"><span class="pre">NEWFILENAME</span></code> est utilisé comme
préfixe au nom du fichier).</p></li>
</ul>
<p>La commande externe est supposée se comporter comme suit pour ses valeurs de retour :</p>
<ul class="simple">
<li><p>exit 0, pour une exécution correcte</p></li>
<li><p>exit 1, pour une exécution correcte mais avec avertissement</p></li>
<li><p>toute autre valeur pour une exécution en erreur et seulement dans ce cas, la sortie standard est
utilisée comme message d’erreur. Des informations peuvent être retournées au serveur distant avec les
balises <code class="docutils literal notranslate"><span class="pre">#ERRORMSG#</span></code> et <code class="docutils literal notranslate"><span class="pre">#ERRORCODE#</span></code> ou <code class="docutils literal notranslate"><span class="pre">#ERRORSTRCODE#</span></code>, et <code class="docutils literal notranslate"><span class="pre">NEWFINALNAME</span></code> si le fichier a
changé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>EXECOUTPUT<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>/path/command arguments #TRANSFERID# #TRUEFULLPATH# %s<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>En prenant en compte les transformations dynamiques, la commande <code class="docutils literal notranslate"><span class="pre">/path/command</span></code> sera exécutée avec les
arguments suivants :
<code class="docutils literal notranslate"><span class="pre">arguments</span> <span class="pre">transferId</span> <span class="pre">/path/currentFilename</span> <span class="pre">transferInformation</span></code>.</p>
<p>La dernière ligne retournée par la commande externe est interprétée comme le nouveau chemin absolu du
fichier courant. Des informations peuvent être retournées au serveur distant avec les
balises <code class="docutils literal notranslate"><span class="pre">#ERRORMSG#</span></code> et <code class="docutils literal notranslate"><span class="pre">#ERRORCODE#</span></code> ou <code class="docutils literal notranslate"><span class="pre">#ERRORSTRCODE#</span></code>, et <code class="docutils literal notranslate"><span class="pre">NEWFINALNAME</span></code> si le fichier a changé.</p>
</div>
<div class="section" id="execjava">
<h3>EXECJAVA<a class="headerlink" href="#execjava" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exécute une classe Java externe en fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Le <code class="docutils literal notranslate"><span class="pre">Delay</span></code> est le temps maximum autorisé en millisecondes avant que la tâche ne soit considérée comme
en time out et donc en erreur.</p></li>
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Le nom de la classe Java (qui doit implémenter <code class="docutils literal notranslate"><span class="pre">R66Runnable</span></code> ou étendre <code class="docutils literal notranslate"><span class="pre">AbstractExecJavaTask</span></code>, en
ignorant les méthodes <code class="docutils literal notranslate"><span class="pre">validate/finalValidate/invalid</span></code> utilisées uniquement pour les tâches <code class="docutils literal notranslate"><span class="pre">Business</span></code>)
est obtenu comme le premier argument. L’allocation est réalisée sous la forme <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">MyClass()</span></code>,
c’est-à-dire un constructeur sans argument.</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>EXECJAVA<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>java.class.name #TRANSFERID# #TRUEFULLPATH#<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>10000<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci va déclencher l’exécution de la commande nommée <code class="docutils literal notranslate"><span class="pre">java.class.name</span></code> avec les arguments suivants :
<code class="docutils literal notranslate"><span class="pre">arguments</span> <span class="pre">transferId</span> <span class="pre">/path/currentFilename</span></code>.</p>
<p>Eléments additionnels : Usage de la classe ExecJava</p>
<p>Afin de faciliter l’intégration dans des modules applicatifs, Waarp R66
supporte la possibilité de déclencher des classes Java spécifiques de 3
manières (depuis la version 2.3) :</p>
<ul class="simple">
<li><p>L’une est au travers de tâches de traitement pré- ou post-transfert, ou en
cas d’erreur  en utilisant le mot clef EXECJAVA, suivi du nom complet de la
classe Java qui doit implémenter l’interface <code class="docutils literal notranslate"><span class="pre">R66Runnable</span></code>.</p></li>
<li><p>Une autre est d’exécuter des commandes spécifiques <code class="docutils literal notranslate"><span class="pre">R66Business</span></code>, qui sont
également des implémentations de l’interface <code class="docutils literal notranslate"><span class="pre">R66Runnable</span></code> au travers de
l’extension de <code class="docutils literal notranslate"><span class="pre">AbstractExecJavaTask</span></code>.</p></li>
<li><p>Enfin, il y a la possibilité d’associer une classe <code class="docutils literal notranslate"><span class="pre">Business</span></code> (voir
<code class="docutils literal notranslate"><span class="pre">R66BusinessInterface</span></code>) au travers
d’une « factory » Business (voir <code class="docutils literal notranslate"><span class="pre">R66BusinessFactoryInterface</span></code>) pour chacun des
transfer et qui déclenche différentes méthodes lors des étapes de chaque transfert :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAtStartup(R66Session</span> <span class="pre">session)</span></code>: lancé au démarrage avant les tâches de pré-tâches</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAfterPreCommand(R66Session</span> <span class="pre">session)</span></code>: lancé après les pré-tâches mais avant le transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAfterTransfer(R66Session</span> <span class="pre">session)</span></code>: lancé après le transfer mais avant les
post-tâches</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAfterPost(R66Session</span> <span class="pre">session)</span></code>: lancé après les post-tâches et avant la fin de la requête</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAtError(R66Session</span> <span class="pre">session)</span></code>: lancé si une erreur intervient</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">checkAtChangeFilename(R66Session</span> <span class="pre">session)</span></code>: lancé si le nom du fichier change durant des
tâches</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">releaseResources()</span></code>: lancé à la toute fin pour nettoyer les possibles ressources utilisées</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">getInfo()</span></code> and <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setInfo(String</span> <span class="pre">info)</span></code>: lancés de manière programmatique (code
métier) pour permettre de positionner une information spéciale (chaîne de caractères) et de la récupérer
à n’importe quel moment</p></li>
</ul>
</li>
</ul>
<p>Notez que la <code class="docutils literal notranslate"><span class="pre">R66BusinessFactory</span></code> peut être déclarée dans le fichier XML de configuration du moniteur
dans la balise <code class="docutils literal notranslate"><span class="pre">businessfactory</span></code> dans les parties <code class="docutils literal notranslate"><span class="pre">server</span></code> ou <code class="docutils literal notranslate"><span class="pre">client</span></code>, mais est limitée à un
constructeur sans argument.</p>
<p>Notez enfin que pour autoriser des requêtes Business, le droit doit avoir été accordé au partenaire comme
suit dans le fichier de configuration XML :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;business&gt;&lt;businessid&gt;</span>hostname<span class="nt">&lt;/businessid&gt;</span>...<span class="nt">&lt;/business&gt;</span>
</pre></div>
</div>
<p>Si non positionné, le partenaire ne sera pas autorisé. Pour <code class="docutils literal notranslate"><span class="pre">EXECJAVA</span></code>, la sécurité est assurée par le
fait que la règle est locale au serveur qui l’ecécute et que la règle peut elle aussi limiter les
partenaires qui peuvent l’utiliser.</p>
</div>
<div class="section" id="restart">
<h3>RESTART<a class="headerlink" href="#restart" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche permet de redémarrer un serveur Waarp. Il n’y a aucun argument.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>RESTART<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;&lt;/path&gt;</span>
  <span class="nt">&lt;delay&gt;</span>0<span class="nt">&lt;/delay&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>L’exemple d’usage le plus fréquent est la mise à jour des binaires ou de la configuration XML du serveur
via un transfert, suivi d’un <code class="docutils literal notranslate"><span class="pre">UNTAR</span></code> ou <code class="docutils literal notranslate"><span class="pre">UNZIP</span></code> et enfin d’un <code class="docutils literal notranslate"><span class="pre">RESTART</span></code>.</p>
</div>
</div>
<div class="section" id="taches-executant-un-transfert">
<h2>Tâches exécutant un transfert<a class="headerlink" href="#taches-executant-un-transfert" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="transfer">
<h3>TRANSFER<a class="headerlink" href="#transfer" title="Lien permanent vers ce titre">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.4.0: </span>option <code class="docutils literal notranslate"><span class="pre">-nofollow</span></code></p>
</div>
<p>Soumet un nouveau transfert basé sur des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p>
<ul class="simple">
<li><p>Une fois le <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé selon les remplacements dynamiques, il est utilisé comme
<code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">Format</span></code> avec le <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code> utilisé en entrée (<code class="docutils literal notranslate"><span class="pre">String.format(Path,Info)</span></code>).</p></li>
<li><p>Les arguments de transferts sont obtenus à partir du <code class="docutils literal notranslate"><span class="pre">Path</span></code> transformé.</p></li>
<li><p>Le résultat est considéré comme un <code class="docutils literal notranslate"><span class="pre">r66send</span></code> sauf <code class="docutils literal notranslate"><span class="pre">-info</span></code> qui doit être le dernier item, et
<code class="docutils literal notranslate"><span class="pre">-copyinfo</span></code> copiera en première position les informations de transferts originales dans les nouvelles, en
ayant toujours la possibilité d’en ajouter d’autres via <code class="docutils literal notranslate"><span class="pre">-info</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré</p></li>
<li><p>Le fichier n’est pas marqué comme déplacé.</p></li>
</ul>
<p>Arguments du transfert :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">to</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span>        <span class="n">Spécifie</span> <span class="n">le</span> <span class="n">partenaire</span> <span class="n">distant</span>
<span class="p">(</span><span class="o">-</span><span class="nb">id</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;|</span>      <span class="n">Spécifie</span> <span class="n">l</span><span class="s1">&#39;identifiant du transfert</span>
 <span class="p">(</span><span class="o">-</span><span class="n">file</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span>    <span class="n">Spécifie</span> <span class="n">le</span> <span class="n">fichier</span> <span class="n">à</span> <span class="n">opérer</span>
  <span class="o">-</span><span class="n">rule</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span><span class="p">))</span>  <span class="n">Spécifie</span> <span class="n">la</span> <span class="n">règle</span> <span class="n">de</span> <span class="n">transfert</span>
<span class="p">[</span><span class="o">-</span><span class="n">block</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span><span class="p">]</span>   <span class="n">Spécifie</span> <span class="n">la</span> <span class="n">taille</span> <span class="n">du</span> <span class="n">bloc</span>
<span class="p">[</span><span class="o">-</span><span class="n">nofollow</span><span class="p">]</span>      <span class="n">Spécifie</span> <span class="n">que</span> <span class="n">le</span> <span class="n">trasfert</span> <span class="n">ne</span> <span class="n">devra</span> <span class="n">pas</span> <span class="n">intégrer</span> <span class="n">un</span> <span class="s2">&quot;follow&quot;</span> <span class="nb">id</span>
<span class="p">[</span><span class="o">-</span><span class="n">md5</span><span class="p">]</span>           <span class="n">Spécifie</span> <span class="n">qu</span><span class="s1">&#39;un calcul d&#39;</span><span class="n">empreinte</span> <span class="n">doit</span> <span class="n">être</span> <span class="n">réalisé</span> <span class="n">pour</span>
                  <span class="n">valider</span> <span class="n">le</span> <span class="n">transfert</span>
<span class="p">[</span><span class="o">-</span><span class="n">delay</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;|</span>   <span class="n">Spécifie</span> <span class="n">le</span> <span class="n">délai</span> <span class="n">comme</span> <span class="n">un</span> <span class="n">temps</span> <span class="n">epoch</span> <span class="n">ou</span> <span class="n">un</span> <span class="n">délai</span> <span class="p">(</span><span class="o">+</span><span class="n">arg</span><span class="p">)</span> <span class="n">en</span> <span class="n">ms</span>
 <span class="o">-</span><span class="n">start</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span><span class="p">]</span>   <span class="n">Spécifie</span> <span class="n">la</span> <span class="n">date</span> <span class="n">de</span> <span class="n">démarrage</span> <span class="n">yyyyMMddHHmmss</span>
<span class="p">[</span><span class="o">-</span><span class="n">nolog</span><span class="p">]</span>         <span class="n">Spécifie</span> <span class="n">de</span> <span class="n">ne</span> <span class="n">rien</span> <span class="n">conserver</span> <span class="n">de</span> <span class="n">ce</span> <span class="n">transfert</span> <span class="p">(</span><span class="n">en</span> <span class="n">base</span><span class="p">)</span>
<span class="p">[</span><span class="o">-</span><span class="n">notlogWarn</span> <span class="o">|</span>   <span class="n">Spécifie</span> <span class="n">que</span> <span class="n">le</span> <span class="n">log</span> <span class="n">final</span> <span class="n">est</span> <span class="n">en</span> <span class="n">mode</span> <span class="n">Info</span> <span class="n">si</span> <span class="n">OK</span>
 <span class="o">-</span><span class="n">logWarn</span><span class="p">]</span>       <span class="n">Spécifie</span> <span class="n">que</span> <span class="n">le</span> <span class="n">log</span> <span class="n">final</span> <span class="n">est</span> <span class="n">en</span> <span class="n">mode</span> <span class="n">Warn</span> <span class="n">si</span> <span class="n">OK</span> <span class="p">(</span><span class="n">défaut</span><span class="p">)</span>
<span class="p">[</span><span class="o">-</span><span class="n">copyinfo</span><span class="p">]</span>      <span class="n">Spécifie</span> <span class="n">que</span> <span class="n">les</span> <span class="n">informations</span> <span class="n">de</span> <span class="n">transfert</span> <span class="n">seront</span> <span class="n">recopiées</span>
                  <span class="n">intégralement</span> <span class="n">en</span> <span class="n">préposition</span> <span class="n">des</span> <span class="n">nouvelles</span> <span class="n">valeurs</span>
<span class="p">[</span><span class="o">-</span><span class="n">info</span> <span class="o">&lt;</span><span class="n">arg</span><span class="o">&gt;</span><span class="p">)</span>    <span class="n">Spécifie</span> <span class="n">les</span> <span class="n">informations</span> <span class="n">de</span> <span class="n">transfert</span> <span class="p">(</span><span class="n">en</span> <span class="n">dernière</span> <span class="n">position</span><span class="p">)</span>
</pre></div>
</div>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>TRANSFER<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file #TRUEFULLPATH# -to remotehost
  -rule ruletouse -info transfer Information<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci créera une nouvelle requête de transfert (asynchrone) en utilisant le fichier courant
(<code class="docutils literal notranslate"><span class="pre">#TRUEFULLPATH#</span></code>), pour envoyer (ou recevoir selon la règle utilisée)
vers (ou depuis) le partenaire, en utilisant <code class="docutils literal notranslate"><span class="pre">transfer</span> <span class="pre">Information</span></code> comme argument de transfert.</p>
</div>
<div class="section" id="reschedule">
<h3>RESCHEDULE<a class="headerlink" href="#reschedule" title="Lien permanent vers ce titre">¶</a></h3>
<p>Replanifie une tâche de transfert en cas d’erreur avec un délai spécifié en millisecondes, si le code
d’erreur est un de
ceux spécifiés et si les intervalles optionnels de dates sont compatibles avec la nouvelle planification.</p>
<p>La balise <code class="docutils literal notranslate"><span class="pre">path</span></code> accepte les arguments suivants (les deux premiers sont
obligatoires) :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-delay</span> <span class="pre">ms</span></code> spécifie le délai en millisecondes après lequel retenter ce
transfert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-case</span> <span class="pre">errorCode,errorCode,...</span></code> où les « errorCode » sont une liste de codes
d’erreur pour lesquels la tâche est exécutée. Les codes suivants sont
disponibles (e nom de l’erreur et le code d’une lettre peuvent petre
utilisés) :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ConnectionImpossible(C)</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ServerOverloaded(l)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BadAuthent(A)</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExternalOp(E)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TransferError(T)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MD5Error(M)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Disconnection(D)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RemoteShutdown(r)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FinalOp(F)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Unimplemented(U)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Shutdown(S)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RemoteError(R)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Internal(I)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StoppedTransfer(H)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CanceledTransfer(K)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Warning(W)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Unknown(-)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QueryAlreadyFinished(Q)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QueryStillRunning(s)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NotKnownHost(N)</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QueryRemotelyUnknown(u)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FileNotFound(f)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CommandNotFound(c)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PassThroughMode(p)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-between</span> <span class="pre">starttime;endtime</span></code>, <code class="docutils literal notranslate"><span class="pre">-notbetween</span> <span class="pre">starttime;endtime</span></code> permettent
de définir des plages horaires durant lesquelles les tentatives de transferts
peuvent ou, respectivement, ne peuvent pas être retentés. Les règles
suivantes sont utilisées :</p>
<ul>
<li><p>Ces arguments peuvent être utilisés plusieurs fois et peuvent être mixés ;</p></li>
<li><p>Ils ont le format suivant : <code class="docutils literal notranslate"><span class="pre">Yn:Mn:Dn:Hn:mn:Sn</span></code> où n
spécifie un nombre pour chaque partie d’une date (optionnelle) comme <code class="docutils literal notranslate"><span class="pre">Y</span></code>
= Année, <code class="docutils literal notranslate"><span class="pre">M</span></code> = Mois, <code class="docutils literal notranslate"><span class="pre">D</span></code> = Jour, <code class="docutils literal notranslate"><span class="pre">H</span></code> = Heure, <code class="docutils literal notranslate"><span class="pre">m</span></code> = minute, <code class="docutils literal notranslate"><span class="pre">s</span></code> =
seconde ;</p></li>
<li><p>Le format peut être  <code class="docutils literal notranslate"><span class="pre">X+n</span></code>, <code class="docutils literal notranslate"><span class="pre">X-n</span></code>, <code class="docutils literal notranslate"><span class="pre">X=n</span></code> ou <code class="docutils literal notranslate"><span class="pre">Xn</span></code> où <code class="docutils literal notranslate"><span class="pre">X+-n</span></code>
signifie ajouter/soustraire n à la date courante, tandis que <code class="docutils literal notranslate"><span class="pre">X=n</span></code> ou
<code class="docutils literal notranslate"><span class="pre">Xn</span></code> signifie une valeur exacte ;</p></li>
<li><p>Si aucune spécification de temps n’est présente, ce sera la date actuelle ;</p></li>
<li><p>La date planifiée ne doit pas être dans un des intervalles définis par
les arguments <code class="docutils literal notranslate"><span class="pre">-notbetween</span></code> ;</p></li>
<li><p>La date planifiée doit être dans un des intervalles définis par les
arguments <code class="docutils literal notranslate"><span class="pre">-between</span></code> ;</p></li>
<li><p>Si aucun de ces arguments n’est spécifié, la date planifiée sera toujours
valide.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">starttime</span></code> est plus grand que <code class="docutils literal notranslate"><span class="pre">endtime</span></code>, <code class="docutils literal notranslate"><span class="pre">endtime</span></code> prendra la valeur <code class="docutils literal notranslate"><span class="pre">starttime</span></code> + 1 jour ;</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">starttime</span></code> et <code class="docutils literal notranslate"><span class="pre">endtime</span></code> sont inférieurs à la date planifiée, ils auront également un décalage d’un
jour.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-count</span> <span class="pre">limit</span></code> sera la limite de retentatives. La valeur limite est prise des
<code class="docutils literal notranslate"><span class="pre">information</span> <span class="pre">de</span> <span class="pre">transfert</span></code> et non de la règle.</p>
<ul>
<li><p>Chaque fois que cette fonction est appelée, la valeur limite est remplacée
par <code class="docutils literal notranslate"><span class="pre">newlimit</span> <span class="pre">=</span> <span class="pre">limit</span> <span class="pre">-</span> <span class="pre">1</span></code> dans l”<code class="docutils literal notranslate"><span class="pre">information</span> <span class="pre">de</span> <span class="pre">transfert</span></code>.</p></li>
<li><p>Pour assurer la cohérence, la valeur doit être dans ce champ puisque elle
sera changée statiquement.  Cependant, une valeur doit être positionnée dans
la règle afin de réinitialiser la valeur lorsque le décompte tombe à 0.</p></li>
<li><p>Ainsi, dans la règle, <code class="docutils literal notranslate"><span class="pre">-count</span> <span class="pre">resetlimit</span></code> doit être présent, où
<code class="docutils literal notranslate"><span class="pre">resetlimit</span></code> sera la nouvelle valeur lorsque celle-ci atteindra 0. Si elle
est manquante la condition ne peut pas être appliquée.</p></li>
</ul>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>Notez que si un précédent appel à <code class="docutils literal notranslate"><span class="pre">RESCHEDULE</span></code> a été réalisé et courroné
de succès, les appels suivants seront ignorés.</p></li>
<li><p>Toutes tâches qui suivent celle-ci seront ignorées et non exécutées si la
replanification est acceptée. Au contraire, si la replanification est
refusée, les tâches suivantes seront exécutées normalement.</p></li>
</ul>
</div>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>RESCHEDULE<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-delay 3600000
  -case ConnectionImpossible,ServerOverloaded,Shutdown
  -notbetween H7:m0:S0;H19:m0:S0
  -notbetween H1:m0:S0;H=3:m0:S0 -count 1<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Cet exemple illustre le cas d’une nouvelle tentative d’un transfert tombé en
erreur à cause d’une connexion impossible. La nouvelle tentative sera faite
dans une heure, si l’heure résultante n’est pas comprise 7H du matin et 7H du
soir, ni entre 1H du matin et 3H du matin avec une limite de 3 tentatives
(la valeur <code class="docutils literal notranslate"><span class="pre">retry</span></code> sera réinitialisée à 1 en cas de 3 tentatives).</p>
<p>Pour chaque tentative, le compteur sera décrémenté.</p>
</div>
<div class="section" id="ftp">
<h3>FTP<a class="headerlink" href="#ftp" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette tâche permet de réaliser un transfert synchrone en utilisant FTP. Elle utilise les paramètres suivants :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-file</span> <span class="pre">filepath</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-to</span> <span class="pre">requestedHost</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-port</span> <span class="pre">port</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-user</span> <span class="pre">user</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-pwd</span> <span class="pre">pwd</span></code></p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-account</span> <span class="pre">account</span></code>]</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-mode</span> <span class="pre">active/passive</span></code>]</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-ssl</span> <span class="pre">no/implicit/explicit</span></code>]</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-cwd</span> <span class="pre">remotepath</span></code>]</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-digest</span> <span class="pre">(crc,md5,sha1)</span></code>]</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-pre</span> <span class="pre">extraCommand1</span></code> avec “,” comme séparateur d’arguments]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-command</span> <span class="pre">command</span></code> où <code class="docutils literal notranslate"><span class="pre">commande</span></code> est un parmi (<code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code>, <code class="docutils literal notranslate"><span class="pre">append</span></code>)</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-post</span> <span class="pre">extraCommand2</span></code> avec “,” comme séparateur d’arguments]</p></li>
</ul>
<p>L’orde des commandes sera alors :</p>
<ol class="arabic simple">
<li><p>Connexion au requestHost avec le port.</p></li>
</ol>
<blockquote>
<div><p>Si <code class="docutils literal notranslate"><span class="pre">-ssl</span></code> vaut <code class="docutils literal notranslate"><span class="pre">implicit</span></code>, une
liaison liaison TLS native est utilisée et l’étape 5 n’est pas exécutée</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">USER</span> <span class="pre">user</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PASS</span> <span class="pre">pwd</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ACCT</span> <span class="pre">account</span></code>, si <code class="docutils literal notranslate"><span class="pre">-account</span></code> est renseigné</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTH</span> <span class="pre">TLS</span></code>, <code class="docutils literal notranslate"><span class="pre">PBSZ</span> <span class="pre">0</span></code> et <code class="docutils literal notranslate"><span class="pre">PROT</span> <span class="pre">P</span></code>, si <code class="docutils literal notranslate"><span class="pre">-ssl</span></code> vaut <code class="docutils literal notranslate"><span class="pre">explicit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PASV</span></code>, si <code class="docutils literal notranslate"><span class="pre">-mode</span></code> vaut <code class="docutils literal notranslate"><span class="pre">passive</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CWD</span> <span class="pre">remotepath</span></code></p></li>
</ol>
<blockquote>
<div><p>En cas d’erreur, le dossier est créé: <code class="docutils literal notranslate"><span class="pre">MKD</span> <span class="pre">remotepath</span></code> puis <code class="docutils literal notranslate"><span class="pre">CWD</span>
<span class="pre">remotepath</span></code> (en ignorant les erreurs)</p>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Si <code class="docutils literal notranslate"><span class="pre">-pre</span></code> est renseigné, <code class="docutils literal notranslate"><span class="pre">extraCommand1</span></code> avec “,” remplacés par “ “</p></li>
</ol>
<blockquote>
<div><p><strong>note</strong> : n’utilisez pas des commande standards FTP comme <code class="docutils literal notranslate"><span class="pre">ACCT</span></code>,
<code class="docutils literal notranslate"><span class="pre">PASS</span></code>, <code class="docutils literal notranslate"><span class="pre">REIN</span></code>, <code class="docutils literal notranslate"><span class="pre">USER</span></code>, <code class="docutils literal notranslate"><span class="pre">APPE</span></code>, <code class="docutils literal notranslate"><span class="pre">STOR</span></code>, <code class="docutils literal notranslate"><span class="pre">STOU</span></code>, <code class="docutils literal notranslate"><span class="pre">RETR</span></code>,
<code class="docutils literal notranslate"><span class="pre">RMD</span></code>, <code class="docutils literal notranslate"><span class="pre">RNFR</span></code>, <code class="docutils literal notranslate"><span class="pre">RNTO</span></code>, <code class="docutils literal notranslate"><span class="pre">ABOR</span></code>, <code class="docutils literal notranslate"><span class="pre">CWD</span></code>, <code class="docutils literal notranslate"><span class="pre">CDUP</span></code>, <code class="docutils literal notranslate"><span class="pre">MODE</span></code>,
<code class="docutils literal notranslate"><span class="pre">PASV</span></code>, <code class="docutils literal notranslate"><span class="pre">PORT</span></code>, <code class="docutils literal notranslate"><span class="pre">STRU</span></code>, <code class="docutils literal notranslate"><span class="pre">TYPE</span></code>, <code class="docutils literal notranslate"><span class="pre">MDTM</span></code>, <code class="docutils literal notranslate"><span class="pre">MLSD</span></code>, <code class="docutils literal notranslate"><span class="pre">MLST</span></code>,
<code class="docutils literal notranslate"><span class="pre">SIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">AUTH</span></code></p>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p><code class="docutils literal notranslate"><span class="pre">BINARY</span></code> (binary format)</p></li>
<li><p>Transfert des données :</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Si <code class="docutils literal notranslate"><span class="pre">-command</span></code> vaut <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">RETR</span> <span class="pre">filepath.basename</span></code></p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">-command</span></code> vaut <code class="docutils literal notranslate"><span class="pre">put`,</span> <span class="pre">``STOR</span> <span class="pre">filepath</span></code></p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">-command</span></code> vaut <code class="docutils literal notranslate"><span class="pre">append</span></code>, <code class="docutils literal notranslate"><span class="pre">APPE</span> <span class="pre">filepath.basename</span></code></p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Si l’argument <code class="docutils literal notranslate"><span class="pre">-digest</span></code> est donné et que le serveur FTP distant est
compatible avec les commandes <code class="docutils literal notranslate"><span class="pre">XCRC</span></code>, <code class="docutils literal notranslate"><span class="pre">XMD5</span></code>, <code class="docutils literal notranslate"><span class="pre">XSHA1</span></code>, <code class="docutils literal notranslate"><span class="pre">FEAT</span></code> (le
résultat vérifie la présente des options disponibles) ; puis
<code class="docutils literal notranslate"><span class="pre">XCRC</span></code>/<code class="docutils literal notranslate"><span class="pre">XMD5</span></code>/<code class="docutils literal notranslate"><span class="pre">XSHA1</span></code> <code class="docutils literal notranslate"><span class="pre">filepath.basename</span></code> ; puis localement il y
aura la comparaison de ce hash avec le fichier local</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">-post</span></code> est renseigné, <code class="docutils literal notranslate"><span class="pre">extraCommand2</span></code> avec “,” remplacés by “ “</p></li>
</ol>
<blockquote>
<div><p><strong>note</strong> : n’utilisez pas des commande standards FTP comme <code class="docutils literal notranslate"><span class="pre">ACCT</span></code>, <code class="docutils literal notranslate"><span class="pre">PASS</span></code>,
<code class="docutils literal notranslate"><span class="pre">REIN</span></code>, <code class="docutils literal notranslate"><span class="pre">USER</span></code>, <code class="docutils literal notranslate"><span class="pre">APPE</span></code>, <code class="docutils literal notranslate"><span class="pre">STOR</span></code>, <code class="docutils literal notranslate"><span class="pre">STOU</span></code>, <code class="docutils literal notranslate"><span class="pre">RETR</span></code>, <code class="docutils literal notranslate"><span class="pre">RMD</span></code>,
<code class="docutils literal notranslate"><span class="pre">RNFR</span></code>, <code class="docutils literal notranslate"><span class="pre">RNTO</span></code>, <code class="docutils literal notranslate"><span class="pre">ABOR</span></code>, <code class="docutils literal notranslate"><span class="pre">CWD</span></code>, <code class="docutils literal notranslate"><span class="pre">CDUP</span></code>, <code class="docutils literal notranslate"><span class="pre">MODE</span></code>, <code class="docutils literal notranslate"><span class="pre">PASV</span></code>,
<code class="docutils literal notranslate"><span class="pre">PORT</span></code>, <code class="docutils literal notranslate"><span class="pre">STRU</span></code>, <code class="docutils literal notranslate"><span class="pre">TYPE</span></code>, <code class="docutils literal notranslate"><span class="pre">MDTM</span></code>, <code class="docutils literal notranslate"><span class="pre">MLSD</span></code>, <code class="docutils literal notranslate"><span class="pre">MLST</span></code>, <code class="docutils literal notranslate"><span class="pre">SIZE</span></code>,
<code class="docutils literal notranslate"><span class="pre">AUTH</span></code></p>
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p><code class="docutils literal notranslate"><span class="pre">QUIT</span></code></p></li>
</ol>
<p>Le fichier courant est inchangé et non marqué comme déplacé.</p>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task&gt;</span>
  <span class="nt">&lt;type&gt;</span>FTP<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;path&gt;</span>-file /path/file -to remotehost -port port
  -user username -pwd password -command put<span class="nt">&lt;/path&gt;</span>
  <span class="nt">&lt;delay/&gt;</span>
<span class="nt">&lt;/task&gt;</span>
</pre></div>
</div>
<p>Ceci enverra (<code class="docutils literal notranslate"><span class="pre">put</span></code>) le fichier <code class="docutils literal notranslate"><span class="pre">/path/file</span></code> au serveur FTP <code class="docutils literal notranslate"><span class="pre">remotehost</span></code> sur le port <code class="docutils literal notranslate"><span class="pre">port</span></code> en
utilisant les <code class="docutils literal notranslate"><span class="pre">username</span></code> et <code class="docutils literal notranslate"><span class="pre">password</span></code>.</p>
</div>
</div>
<div class="section" id="taches-agissant-sur-l-emplacement-du-fichier-via-un-stockage-s3">
<h2>Tâches agissant sur l’emplacement du fichier via un stockage S3<a class="headerlink" href="#taches-agissant-sur-l-emplacement-du-fichier-via-un-stockage-s3" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.6.0: </span>Les tâches ci-dessous sont nouvelles et supportées avec le module WaarpR66-S3.</p>
</div>
<div class="section" id="s3get">
<h3>S3GET<a class="headerlink" href="#s3get" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier depuis un stockage S3 Objet comme argument et remplace le fichier
actuel avec ce fichier comme source.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>La commande finale est fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>La règle à utiliser doit être en mode THROUGHMODE, soit
<code class="docutils literal notranslate"><span class="pre">SENDMD5THROUGHMODE</span></code> ou <code class="docutils literal notranslate"><span class="pre">SENDTHROUGHMODE</span></code> (respectivement <code class="docutils literal notranslate"><span class="pre">7</span></code> ou <code class="docutils literal notranslate"><span class="pre">5</span></code>) en mode <code class="docutils literal notranslate"><span class="pre">SEND</span></code>,
soit <code class="docutils literal notranslate"><span class="pre">RECVMD5THROUGHMODE</span></code> ou <code class="docutils literal notranslate"><span class="pre">RECVTHROUGHMODE</span></code> (respectivement <code class="docutils literal notranslate"><span class="pre">8</span></code> ou <code class="docutils literal notranslate"><span class="pre">6</span></code>) en mdoe <code class="docutils literal notranslate"><span class="pre">RECV</span></code>,
car le fichier n’existe pas au démarrage.</p>
<p>Le format est le suivant :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-URL</span> <span class="pre">url</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-accessKey</span> <span class="pre">access</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-secretKey</span> <span class="pre">secret</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bucketName</span> <span class="pre">bucket</span> <span class="pre">Name</span></code> où est stocké l’objet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-sourceName</span> <span class="pre">source</span> <span class="pre">Name</span></code> dans le bucket pour sélectionner l’objet final</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-file</span> <span class="pre">final</span> <span class="pre">File</span> <span class="pre">path</span></code> absolue ou relatif depuis le chemin IN</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-getTags</span></code> [<code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">liste</span></code> de noms de tag séparés par des virgules sans espace]]</p></li>
</ul>
<p>Les actions seront dans l’ordre :</p>
<ol class="arabic simple">
<li><p>connexion au service S3 en utilisant la clef d’accès et la clef de secret</p></li>
<li><p>Récupère depuis le bucket l’objet source et le stocke dans le fichier spécifié</p></li>
<li><p>Si getTags is positionné, les informations sont ajoutées au transferInfo et fileInfo</p></li>
<li><p>le fichier courrant est positionné sur ce nouveau fichier reçu (équivalent à la tâche R66 <code class="docutils literal notranslate"><span class="pre">RENAME</span></code>)</p></li>
<li><p>l’émetteur envoie une mise à jour (nom et taille)</p></li>
</ol>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
  <span class="nt">&lt;task&gt;</span>
    <span class="nt">&lt;type&gt;</span>S3GET<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;path&gt;</span>-URL %s -accessKey %s -secretKey %s -bucketName %s -sourceName %s -file #TRUEFULLPATH# -getTags key1,key2<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;delay/&gt;</span>
    <span class="nt">&lt;rank&gt;</span>0<span class="nt">&lt;/rank&gt;</span>
  <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s3getdelete">
<h3>S3GETDELETE<a class="headerlink" href="#s3getdelete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier depuis un stockage S3 Objet comme argument et remplace le fichier
actuel avec ce fichier comme source et efface l’objet source.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>La commande finale est fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p></li>
<li><p>Le fichier est marqué comme déplacé.</p></li>
</ul>
<p>La règle à utiliser doit être en mode THROUGHMODE, soit
<code class="docutils literal notranslate"><span class="pre">SENDMD5THROUGHMODE</span></code> ou <code class="docutils literal notranslate"><span class="pre">SENDTHROUGHMODE</span></code> (respectivement <code class="docutils literal notranslate"><span class="pre">7</span></code> ou <code class="docutils literal notranslate"><span class="pre">5</span></code>) en mode <code class="docutils literal notranslate"><span class="pre">SEND</span></code>,
soit <code class="docutils literal notranslate"><span class="pre">RECVMD5THROUGHMODE</span></code> ou <code class="docutils literal notranslate"><span class="pre">RECVTHROUGHMODE</span></code> (respectivement <code class="docutils literal notranslate"><span class="pre">8</span></code> ou <code class="docutils literal notranslate"><span class="pre">6</span></code>) en mdoe <code class="docutils literal notranslate"><span class="pre">RECV</span></code>,
car le fichier n’existe pas au démarrage.</p>
<p>Le format est le suivant :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-URL</span> <span class="pre">url</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-accessKey</span> <span class="pre">access</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-secretKey</span> <span class="pre">secret</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bucketName</span> <span class="pre">bucket</span> <span class="pre">Name</span></code> où est stocké l’objet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-sourceName</span> <span class="pre">source</span> <span class="pre">Name</span></code> dans le bucket pour sélectionner l’objet final</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-file</span> <span class="pre">final</span> <span class="pre">File</span> <span class="pre">path</span></code> absolue ou relatif depuis le chemin IN</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-getTags</span></code> [<code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">liste</span></code> de noms de tag séparés par des virgules sans espace]]</p></li>
</ul>
<p>Les actions seront dans l’ordre :</p>
<ol class="arabic simple">
<li><p>connexion au service S3 en utilisant la clef d’accès et la clef de secret</p></li>
<li><p>Récupère depuis le bucket l’objet source et le stocke dans le fichier spécifié</p></li>
<li><p>Si getTags is positionné, les informations sont ajoutées au transferInfo et fileInfo</p></li>
<li><p>le fichier courrant est positionné sur ce nouveau fichier reçu (équivalent à la tâche R66 <code class="docutils literal notranslate"><span class="pre">RENAME</span></code>)</p></li>
<li><p>l’émetteur envoie une mise à jour (nom et taille)</p></li>
<li><p>l’objet S3 est effacé</p></li>
</ol>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
  <span class="nt">&lt;task&gt;</span>
    <span class="nt">&lt;type&gt;</span>S3GETDELETE<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;path&gt;</span>-URL %s -accessKey %s -secretKey %s -bucketName %s -sourceName %s -file #TRUEFULLPATH# -getTags key1,key2<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;delay/&gt;</span>
    <span class="nt">&lt;rank&gt;</span>0<span class="nt">&lt;/rank&gt;</span>
  <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s3delete">
<h3>S3DELETE<a class="headerlink" href="#s3delete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Efface l’objet S3.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>La commande finale est fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p></li>
<li><p>Le fichier courant n’est pas modifié.</p></li>
</ul>
<p>Le format est le suivant :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-URL</span> <span class="pre">url</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-accessKey</span> <span class="pre">access</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-secretKey</span> <span class="pre">secret</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bucketName</span> <span class="pre">bucket</span> <span class="pre">Name</span></code> où est stocké l’objet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-sourceName</span> <span class="pre">source</span> <span class="pre">Name</span></code> dans le bucket pour sélectionner l’objet final</p></li>
</ul>
<p>Les actions seront dans l’ordre :</p>
<ol class="arabic simple">
<li><p>connexion au service S3 en utilisant la clef d’accès et la clef de secret</p></li>
<li><p>l’objet S3 est effacé</p></li>
</ol>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
  <span class="nt">&lt;task&gt;</span>
    <span class="nt">&lt;type&gt;</span>S3DELETE<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;path&gt;</span>-URL %s -accessKey %s -secretKey %s -bucketName %s -sourceName %s<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;delay/&gt;</span>
    <span class="nt">&lt;rank&gt;</span>0<span class="nt">&lt;/rank&gt;</span>
  <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s3put">
<h3>S3PUT<a class="headerlink" href="#s3put" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier courant ver un stockage S3 Objet.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>La commande finale est fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p></li>
<li><p>Le fichier courant est inchangé.</p></li>
</ul>
<p>Le format est le suivant :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-URL</span> <span class="pre">url</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-accessKey</span> <span class="pre">access</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-secretKey</span> <span class="pre">secret</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bucketName</span> <span class="pre">bucket</span> <span class="pre">Name</span></code> où est stocké l’objet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-targetName</span> <span class="pre">target</span> <span class="pre">Name</span></code> dans le bucket pour sélectionner l’objet final</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-setTags</span></code> [<code class="docutils literal notranslate"><span class="pre">clef:valeur,clef:valeur</span></code> de <code class="docutils literal notranslate"><span class="pre">clef:valeur</span></code> séparés par des virgules sans espace]]</p></li>
</ul>
<p>Les actions seront dans l’ordre :</p>
<ol class="arabic simple">
<li><p>connexion au service S3 en utilisant la clef d’accès et la clef de secret</p></li>
<li><p>Stocke le fichier courant dans le bucket l’objet destination</p></li>
<li><p>Si setTags is positionné, les informations sont ajoutées à l’objet S3</p></li>
</ol>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
  <span class="nt">&lt;task&gt;</span>
    <span class="nt">&lt;type&gt;</span>S3PUT<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;path&gt;</span>-URL %s -accessKey %s -secretKey %s -bucketName %s -targetName %s -setTags key1:value1,key2:value2<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;delay/&gt;</span>
    <span class="nt">&lt;rank&gt;</span>0<span class="nt">&lt;/rank&gt;</span>
  <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s3putr66delete">
<h3>S3PUTR66DELETE<a class="headerlink" href="#s3putr66delete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copie le fichier courant ver un stockage S3 Objet et efface le fichier courant.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Delay</span></code> est ignoré.</p></li>
<li><p>La commande finale est fonction des arguments <code class="docutils literal notranslate"><span class="pre">Path</span></code> et <code class="docutils literal notranslate"><span class="pre">Transfer</span> <span class="pre">Information</span></code>.</p></li>
<li><p>Le fichier courant est inchangé.</p></li>
</ul>
<p>Le format est le suivant :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-URL</span> <span class="pre">url</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-accessKey</span> <span class="pre">access</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-secretKey</span> <span class="pre">secret</span> <span class="pre">Key</span></code> du service S3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bucketName</span> <span class="pre">bucket</span> <span class="pre">Name</span></code> où est stocké l’objet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-targetName</span> <span class="pre">target</span> <span class="pre">Name</span></code> dans le bucket pour sélectionner l’objet final</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">-setTags</span></code> [<code class="docutils literal notranslate"><span class="pre">clef:valeur,clef:valeur</span></code> de <code class="docutils literal notranslate"><span class="pre">clef:valeur</span></code> séparés par des virgules sans espace]]</p></li>
</ul>
<p>Les actions seront dans l’ordre :</p>
<ol class="arabic simple">
<li><p>connexion au service S3 en utilisant la clef d’accès et la clef de secret</p></li>
<li><p>Stocke le fichier courant dans le bucket l’objet destination</p></li>
<li><p>Si setTags is positionné, les informations sont ajoutées à l’objet S3</p></li>
<li><p>le fichier courrant est supprimé (équivalent à la tâche <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>)</p></li>
</ol>
<p>Exemple:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tasks&gt;</span>
  <span class="nt">&lt;task&gt;</span>
    <span class="nt">&lt;type&gt;</span>S3PUTDELETE<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;path&gt;</span>-URL %s -accessKey %s -secretKey %s -bucketName %s -targetName %s -setTags key1:value1,key2:value2<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;delay/&gt;</span>
    <span class="nt">&lt;rank&gt;</span>0<span class="nt">&lt;/rank&gt;</span>
  <span class="nt">&lt;/task&gt;</span>
<span class="nt">&lt;/tasks&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="authent.html" class="btn btn-neutral float-right" title="authent.xml" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rule.html" class="btn btn-neutral" title="rule.xml" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Waarp SAS.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.6.0-1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>